---
layout:     post
title:     加密技术
date:  2018-03-19
category:   工具&知识
tags:   [工具&知识]
---
http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html  

1. 对称密钥加密技术
    加密和解密都是使用的同一个密钥。当密钥很长的时候很难破解。但是发送和接收方在进行密钥交换的时候，可能被其他人窃取，不适用于在网络上传输
2. 秘密密钥加密技术
    用于加密和解密的不是同一个密钥，公钥用于加密，私钥用于解密。传输前，先告诉对方公钥，对方将数据经过公钥加密之后发送过来，没有本地的私钥是无法解密的，这样就确保了安全，即便所有人都知道了你的公钥，在没有私钥的情况下，也是没有用的。  
    一个典型的算法是RSA算法，他的公钥和私钥都是两个数字，通过质数相关的运算得到。一般公钥达到128字节，想要对其进行质数分解，得到私钥是不可能的。

---

数字签名
数字签名的过程跟密钥加密传输的过程是相反的
对文件取摘要值==>使用私钥加密 ==>将加密后的特征值放到正文后面==>接收方将签名使用公钥解密，并且也取正文特征值进行比对==>相同则说明这份文件是发送者的。  
这里面使用私钥加密，因为只有发送者自己有私钥，这就相当于是签名了。不用担心其他人能够解开签名，因为这仅仅只是一个签名，证明是发送人发送的而已，不存在信息安全的问题。

---

数字证书  
上面的数字签名存在一个缺陷：如果A发送给B，B使用A的公钥能够正常解开是没有错。但是假设C偷偷将B手里的A的公钥换成了自己的，也就是B手里是C的公钥（他以为是A的），此时C可以冒充A了，C通过自己的私钥生成签名发送给B，B解开发现没有问题，以为是A呢，这样就被骗了。。  
解决方法就是数字证书！  
"证书中心"（certificate authority，简称CA），就是对于公钥进行认证，确保公钥是正确的。  
证书中心用自己的私钥，对A的公钥和一些相关信息一起加密，生成"数字证书"（Digital Certificate），发送给A。  
A以后给B发数据，除了签名，在附上这个证书。B收信后，用CA的公钥解开数字证书，就可以拿到A真实的公钥了，然后就能证明"数字签名"是否真的是A签的。解读一下,就是CA对于A的公钥进行了一次加密，相当与进行了两次数字签名的验证。

---

https技术就是基于数字证书进行的  
      
==>https传输的过程中是通过对称加密技术传输的  
==>导出问题,如何协商对称密钥?确保客户端向服务端发送的密钥不被窃取      
==>为了能够安全的协商密钥，使用非对称加密技术将密钥进行一次加密。客户端使用服务端的公钥将对称密钥加密，客户端使用私钥获得对称密钥            
==>导出问题？如何将服务器的公钥安全的送到客户端而不被窃取，如何确保客户端收到的公钥不是来源于伪造的服务器，假设公钥被劫持了，劫持者可以伪造服务器和客户端      
==>为了确保服务器公钥安全，引入数字证书。服务器端不是向客户端发送公钥而是数字证书，客户端有能力辨别数字证书的真伪，如果数字证书是可信赖的，就从其中取出服务端的公钥     
==>最后的问题，客户端如何辨认证书的真伪。使用数字签名    
==>服务器首先到CA中心请求认证，CA中心根据自己的私钥将证书【证书包括服务器公钥以及相关信息】进行数字签名。客户端使用众所周知的CA中心的公钥对其进行签名校验，就可以辨认这个证书是不是来自于真实的目标服务器了.     

https简短过程： 
- 客户端发起请求
- 服务器返回数字证书
- 客户端校验数字证书，如果校验通过，就提取其中的服务器公钥，使用公钥加密对称密钥发送
- 服务器使用私钥解密对称密钥，并且使用对称密钥加密要返回的内容
- 之后正常使用对称密钥通信

---

总结：  
对于非对称密钥，如果用作加密，就是发送方使用接收方的公钥进行加密，接收方通过自己的私钥进行解密 **《密钥对是接收方的》**  
如果是用于数字签名，就是发送方使用私钥进行加密，接收方使用发送方的公钥进行解密 **《密钥对是发送方的》**  
数字证书是数字签名的补充应用。CA对于发送方的公钥进行了一次数据签名，接收方使用CA的公钥解密出发送方的公钥，确保公钥正确，然后进行签名认证。
数字证书是为了确保公钥传递的安全性问题，数字签名解决了多家认证机构之间的区分问题。
