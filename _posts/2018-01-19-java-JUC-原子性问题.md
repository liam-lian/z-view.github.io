---
layout:     post
title:      原子性问题
category:   JUC
tags:   [javas, JUC]
---
原子性问题的定义，就是是说一个操作我们希望是原子的，但是实际上在计算的时候是分步骤进行的  
这个时候，多线程操作的时候可能产生数据不同步的问题

#### Java中的原子操作
Java只有以下四种操作是原子的  
- all assignments of primitive types except for long and double
- all assignments of references
- all operations of java.concurrent.Atomic* classes
- all assignments to volatile longs and doubles  
例如：
long foo = 65465498L;  
实时上java会分两步写入这个long变量，先写32位，再写后32位

#### java.util.curcurrent.atomic包
atomic包提供了对于数据进行原子操作的大量的包装的类，是通过volatile和CAS算法共同实现了原子性的问题，不同于锁的机制，速度很快  
