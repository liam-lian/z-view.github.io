---
layout:     post
title:      计算机中数字的表示
date:  2018-03-18
category:   工具&知识
tags:   [工具&知识]
---
计算机中数字的表示
---
事实上就是定义的机器数和数字真值之间的关系>  
- 无符号数，n位机器数表示的数值的范围是`0~~2^n-1`
- 有符号数，最高位表示正负，0为正，1为负,范围是`(-2^n-1)~~(2^n-1)-1`

**数值的计算**

对于无符号数的加减法直接计算即可  
对于有符号数字，因为存在符号，加减法是时候考虑需要考虑符号，计算不方便，因此引入了补码和反码的概念（补码和反码的符号位都不变）。  
- 反码 ：整数不变，负数各位取反
- 补码 ：正数不变，负数反码加1  
这里的反码就是用来去补码的一个过渡，没什么意义。  
补码的意义在于，通过补码的加法可以对于有符号数直接带上符号位进行计算。    
  
 因为计算机只会计算加法，如果直接使用原码计算的话，会发现1-1=1+（-1）=0001 + 1001 =1010 就是-2  
 必须使用补码来解决这个问题。
```
运算规则
[ X+Y ]（补码形式） = [ X ]（补码形式） + [ Y ]（补码形式） 
[ X-Y ]（补码形式） = [ X ]（补码形式） + [ -Y ]（补码形式）
```
举例说明
```
例如计算8位机：4+（-12）：  
4   ==>补码： 0000  0100
-12 ==>补码： 1111  0100
补码相加：    1111 1000
对应的原码：  1000 1000
得到的结果就是-8
```

**为什么char的范围是-128~127**    

### 关于补码的深入理解
同余的概念，时钟上的3点和9点就是同余的===>意思是，我当前向前拨9格和向后拨3格是一样的  =
在始终的 概念下： A+9=A-3  
同理，对于8位机器，`A-100=A+156`===>在看看-100的补码：1001 1100，就是无符号的156！这就是补码的意义 
因此只是对于负数的补码是值才变化，补码其实就是负数对应的模    
8位只能表示256个数，0到255，但我还想表示一些负数怎么办呢？就用与该负数同余的正数来表示呗。-1=255，-2=254，等等。  
因此一个数字a的补码就是(2^n-a).
想象时钟，对于8位的机器，将时钟分为半，一半是0-127共128个数字，另外一半是129-255(用来表示负数)。在补码中，负数实际上代表的意义，是从零点逆时针旋转，例如255表示的意思就是从零点往前调一个数字，表示为-1。。同理128表示的是，从零点往前调128个数字，表示为-128。
推广开来，对于int型的最大值应该是`x7fffffff`,-1值为`0xffffffff`(也就是向前调1),最小值为最大值加上一个，也就是`0x80000000`【也就是传说中的-0】
也就是 **-2^31---2^31-1**   

再次强化,对于8位机器，去掉最高位有7位，取值为0-127。假设后7位的实际取值为n，
- 对于正数，基准为0,实际上的值就是( 0 + n ).
- 对于负数，基准值为-0,即-128实际上的值就是( -128 + n )  
推广到int,对于负数，假设后31位的值为n，那么实际上的值就是( Integer.MIN_VALUE + n )
### Java中的移位操作
- 左移`<<` :就是该数对应二进制码整体左移，左边超出的部分舍弃，右边补零。
- 右移`>>` :该数对应的二进制码整体右移，左边的用原有标志位补充，右边超出的部分舍弃
- 无符号右移`>>>` :不管正负标志位为0还是1，将该数的二进制码整体右移，左边部分总是以0填充，右边部分舍弃
对于正数而言，`>>`和`>>>`没有区别，可以认为是数字除以2,<<可以认为是乘以2       
对于负数而言，就需要单独考虑，`<<`左移是连同符号位一起的，因此把负数直接转为了正数。   
`>>`右移最高位补1，`>>>`相当于是无符号的右移，例如-1(ff)对应的无符号为255，那么`>>>`之后的值为127。



